(()=>{var e={261:()=>{const e=document.querySelector(".burger"),t=document.querySelector(".header__nav"),n=document.querySelectorAll(".nav__button");null==e||e.addEventListener("click",(function(){e.classList.toggle("burger--active"),t.classList.toggle("burger-menu--active"),document.body.classList.toggle("burger-menu-overlay")})),null==n||n.forEach((n=>{n.addEventListener("click",(function(){e.classList.contains("burger--active")&&(e.classList.remove("burger--active"),t.classList.remove("burger-menu--active"),document.body.classList.remove("burger-menu-overlay"))}))})),e&&document.body.addEventListener("click",(function(n){n.target.matches(".burger")||n.target.closest(".burger-menu--active")||(e.classList.remove("burger--active"),t.classList.remove("burger-menu--active"),document.body.classList.remove("burger-menu-overlay"))}))},616:()=>{const e=document.querySelectorAll(".modal-button"),t=document.querySelectorAll(".modal__close-button");e.forEach((e=>{e.addEventListener("click",(function(n){let r=e.getAttribute("data-target"),o=document.getElementById(r);o||(o=document.querySelector(".modal")),o.classList.add("modal--open"),document.body.classList.add("lock"),o.classList.contains("modal--open")&&o.addEventListener("click",(function(e){e.target.closest(".modal__body")||(o.classList.remove("modal--open"),document.body.classList.remove("lock"))})),t.forEach((e=>{e.addEventListener("click",(function(){o.classList.remove("modal--open"),document.body.classList.remove("lock")}))}))}))}))}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}(()=>{"use strict";document.body,document.createElement("div"),n(261),n(616);const e=document.getElementById("shortener-form"),t=document.getElementById("shortener-submitBtn"),r=document.getElementById("long-link"),o=document.getElementById("short-link"),l=document.querySelector(".hero__body"),s=document.querySelector(".form__input-wrapper--short-link"),c=document.querySelector(".hero__qr-body");let a=null==e?void 0:e.querySelectorAll("input"),i=a?Array.from(a).slice(0,-1):null;function u(e){let t,n,r;return"longLink"===e.name&&(t=/^((ftp|http|https):\/\/)?(www\.)?([A-Za-zА-Яа-я0-9]{1}[A-Za-zА-Яа-я0-9\-]*\.?)*\.{1}[A-Za-zА-Яа-я0-9-]{2,8}(\/([\w#!:.?+=&%@!\-\/])*)?((?!\.).)$/.test(e.value),n=e.value.includes("e-lnk.ru"),r="Введите корректный адрес ссылки"),t||""==e.value?n?(e.nextElementSibling.innerText="Это наша ссылка :) Введите другую",e.classList.add("error-input"),!1):(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0):(e.nextElementSibling.innerText=r,e.classList.add("error-input"),!1)}null==e||e.setAttribute("novalidate",!0),null==i||i.forEach((e=>{e.addEventListener("blur",(()=>u(e))),e.addEventListener("input",(()=>u(e)))})),null==e||e.addEventListener("submit",(function(e){e.preventDefault();let n=!1;n=i.map((e=>{let t=u(e)&&function(e){return""===e.value?(e.nextElementSibling.innerText="Поле не должно быть пустым",e.classList.add("error-input"),!1):(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0)}(r);return t})).every((e=>!0===e)),n&&(t.classList.add("loader"),a.forEach((e=>e.setAttribute("disabled","disabled"))),async function(){const e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(v())};try{let t=await fetch(d,e),n=await t.json();console.log("Полученный json (shortener):"),console.log(n),n.shortLink&&n.qr?(o.value=n.shortLink,m.src="data:image/jpg;base64,".concat(n.qr)):n.error&&alert(n.error)}catch(e){alert("Не получилось сократить ссылку :( \nПожалуйста, попробуйте позже"),console.error("ошибка при запросе (shortener): "+e)}}().then((()=>{t.classList.remove("loader"),a.forEach((e=>e.removeAttribute("disabled"))),r.value="",o.value&&(s.classList.add("open"),c.classList.add("open"),l.classList.add("open"))})))}));const d="api/v1/links",m=document.getElementById("qr");function v(){let e={};for(let t of i)t.value&&(e[t.name]=t.value);return e}const b=document.getElementById("shortener-copyBtn");null==b||b.addEventListener("click",(e=>{e.preventDefault(),b.classList.add("checkmark"),async function(e){try{await navigator.clipboard.writeText(e),console.log("copied to clipboard")}catch(e){console.error(e)}}(o.value).then((()=>setTimeout((()=>b.classList.remove("checkmark")),1e3)))}))})()})();