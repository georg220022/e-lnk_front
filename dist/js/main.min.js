(()=>{var e={860:()=>{const e=document.querySelector(".burger"),t=document.querySelector(".header__nav"),r=document.querySelectorAll(".nav__button");e.addEventListener("click",(function(){e.classList.toggle("burger--active"),t.classList.toggle("burger-menu--active"),document.body.classList.toggle("burger-menu-overlay")})),r.forEach((r=>{r.addEventListener("click",(function(){e.classList.contains("burger--active")&&(e.classList.remove("burger--active"),t.classList.remove("burger-menu--active"),document.body.classList.remove("burger-menu-overlay"))}))})),document.body.addEventListener("click",(function(r){r.target.matches(".burger")||r.target.closest(".burger-menu--active")||(e.classList.remove("burger--active"),t.classList.remove("burger-menu--active"),document.body.classList.remove("burger-menu-overlay"))}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}(()=>{"use strict";r(860);const e=document.getElementById("shortener-form"),t=document.getElementById("shortener-submitBtn"),n=document.getElementById("long-link"),o=document.getElementById("short-link"),s=document.querySelector(".hero__body"),a=document.querySelector(".form__input-wrapper--short-link"),c=document.querySelector(".hero__qr-body"),i=/^((ftp|http|https):\/\/)?(www\.)?([A-Za-zА-Яа-я0-9]{1}[A-Za-zА-Яа-я0-9\-]*\.?)*\.{1}[A-Za-zА-Яа-я0-9-]{2,8}(\/([\w#!:.?+=&%@!\-\/])*)?/;let l=e.querySelectorAll("input");function u(e){if("longLink"===e.name)return i.test(e.value)||""==e.value?(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0):(e.nextElementSibling.innerText="Введите корректный адрес ссылки",e.classList.add("error-input"),!1)}e.setAttribute("novalidate",!0),l.forEach((e=>{e!=o&&(e.addEventListener("blur",(()=>u(e))),e.addEventListener("input",(()=>u(e))))})),e.addEventListener("submit",(function(e){e.preventDefault();let r=!1;l.forEach((e=>{e!=o&&(r=u(e)&&function(e){return""===e.value?(e.nextElementSibling.innerText="Поле не должно быть пустым",e.classList.add("error-input"),!1):(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0)}(n))})),r&&(t.classList.add("loader"),l.forEach((e=>e.setAttribute("disabled","disabled"))),async function(){const e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(v())};try{let t=await fetch(d,e),r=await t.json();console.log("Полученный json (shortener):"),console.log(r),r.shortLink&&r.qr?(o.value=r.shortLink,m.src="data:image/jpg;base64,".concat(r.qr)):r.error&&alert(r.error)}catch(e){alert("Не получилось сократить ссылку :( \nПожалуйста, попробуйте позже"),console.error("ошибка при запросе (shortener): "+e)}}().then((()=>{t.classList.remove("loader"),l.forEach((e=>e.removeAttribute("disabled"))),n.value="",o.value&&(a.classList.add("open"),c.classList.add("open"),s.classList.add("open"))})))}));const d="api/v1/links",m=document.getElementById("qr");function v(){let e={};for(let t of l)t!=o&&t.value&&(e[t.name]=t.value);return e}const g=document.getElementById("shortener-copyBtn");g.addEventListener("click",(e=>{e.preventDefault(),g.classList.add("checkmark"),async function(e){try{await navigator.clipboard.writeText(e),console.log("copied to clipboard")}catch(e){console.error(e)}}(o.value).then((()=>setTimeout((()=>g.classList.remove("checkmark")),1e3)))}))})()})();