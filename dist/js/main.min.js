(()=>{var e={860:()=>{const e=document.querySelector(".burger"),t=document.querySelector(".header__nav"),r=document.querySelectorAll(".nav__button");e.addEventListener("click",(function(){e.classList.toggle("burger--active"),t.classList.toggle("burger-menu--active"),document.body.classList.toggle("burger-menu-overlay")})),r.forEach((r=>{r.addEventListener("click",(function(){e.classList.contains("burger--active")&&(e.classList.remove("burger--active"),t.classList.remove("burger-menu--active"),document.body.classList.remove("burger-menu-overlay"))}))})),document.body.addEventListener("click",(function(r){r.target.matches(".burger")||r.target.closest(".burger-menu--active")||(e.classList.remove("burger--active"),t.classList.remove("burger-menu--active"),document.body.classList.remove("burger-menu-overlay"))}))},753:()=>{const e=document.querySelectorAll(".modal-button"),t=document.querySelectorAll(".modal__close-button");e.forEach((e=>{e.addEventListener("click",(function(r){let n=e.getAttribute("data-target"),o=document.getElementById(n);o||(o=document.querySelector(".modal")),o.classList.add("modal--open"),document.body.classList.add("lock"),o.classList.contains("modal--open")&&o.addEventListener("click",(function(e){e.target.closest(".modal__body")||(o.classList.remove("modal--open"),document.body.classList.remove("lock"))})),t.forEach((e=>{e.addEventListener("click",(function(){o.classList.remove("modal--open"),document.body.classList.remove("lock")}))}))}))}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}(()=>{"use strict";r(860),r(753);const e=document.getElementById("shortener-form"),t=document.getElementById("shortener-submitBtn"),n=document.getElementById("long-link"),o=document.getElementById("short-link"),s=document.querySelector(".hero__body"),c=document.querySelector(".form__input-wrapper--short-link"),a=document.querySelector(".hero__qr-body");let l=e.querySelectorAll("input"),i=Array.from(l).slice(0,-1);function d(e){let t,r;return"longLink"===e.name&&(t=/^((ftp|http|https):\/\/)?(www\.)?([A-Za-zА-Яа-я0-9]{1}[A-Za-zА-Яа-я0-9\-]*\.?)*\.{1}[A-Za-zА-Яа-я0-9-]{2,8}(\/([\w#!:.?+=&%@!\-\/])*)?/.test(e.value),r="Введите корректный адрес ссылки"),t||""==e.value?(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0):(e.nextElementSibling.innerText=r,e.classList.add("error-input"),!1)}e.setAttribute("novalidate",!0),i.forEach((e=>{e.addEventListener("blur",(()=>d(e))),e.addEventListener("input",(()=>d(e)))})),e.addEventListener("submit",(function(e){e.preventDefault();let r=!1;r=i.map((e=>{let t=d(e)&&function(e){return""===e.value?(e.nextElementSibling.innerText="Поле не должно быть пустым",e.classList.add("error-input"),!1):(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0)}(n);return t})).every((e=>!0===e)),r&&(t.classList.add("loader"),l.forEach((e=>e.setAttribute("disabled","disabled"))),async function(){const e={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(v())};try{let t=await fetch(u,e),r=await t.json();console.log("Полученный json (shortener):"),console.log(r),r.shortLink&&r.qr?(o.value=r.shortLink,m.src="data:image/jpg;base64,".concat(r.qr)):r.error&&alert(r.error)}catch(e){alert("Не получилось сократить ссылку :( \nПожалуйста, попробуйте позже"),console.error("ошибка при запросе (shortener): "+e)}}().then((()=>{t.classList.remove("loader"),l.forEach((e=>e.removeAttribute("disabled"))),n.value="",o.value&&(c.classList.add("open"),a.classList.add("open"),s.classList.add("open"))})))}));const u="api/v1/links",m=document.getElementById("qr");function v(){let e={};for(let t of i)t.value&&(e[t.name]=t.value);return e}const b=document.getElementById("shortener-copyBtn");b.addEventListener("click",(e=>{e.preventDefault(),b.classList.add("checkmark"),async function(e){try{await navigator.clipboard.writeText(e),console.log("copied to clipboard")}catch(e){console.error(e)}}(o.value).then((()=>setTimeout((()=>b.classList.remove("checkmark")),1e3)))}))})()})();