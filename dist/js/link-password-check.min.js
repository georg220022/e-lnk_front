(()=>{"use strict";const e=document.getElementById("password-check-form"),t=e.querySelector("input"),n=document.getElementById("password-check-button");function o(e){if(""===e.value)return!0;let t=null,n=null;return"linkPassword"===e.name&&(t=e.value.length<16,n="Пароль не может быть длинее 16 символов"),t?(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0):(e.nextElementSibling.innerText=n,e.classList.add("error-input"),!1)}e.setAttribute("novalidate",!0),t.addEventListener("blur",(()=>o(t))),t.addEventListener("input",(()=>o(t))),e.addEventListener("submit",(async function(){if(event.preventDefault(),o(t)&&(""===(r=t).value?(r.nextElementSibling.innerText="Поле не должно быть пустым",r.classList.add("error-input"),0):(r.nextElementSibling.innerText="",r.classList.remove("error-input"),1))){let o={};o.password=t.value,o.shortCode=window.location.search.replace("?","");let r=JSON.stringify(o);t.setAttribute("disabled","disabled"),n.classList.add("loader");let{json:i}=await async function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{token:!1,cookie:!1},{token:r,cookie:i}=o;const l={method:e,credentials:"omit",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:n};r&&(l.headers.Authorization="Bearer ".concat(r)),i&&(l.credentials="include");let a=null,s=null;try{a=await fetch(t,l);try{s=await a.json(),console.log("Полученный json (".concat(t,"):")),console.log(s)}catch(e){}}catch(e){console.error("ошибка при запросе (".concat(t,"): ").concat(e))}return{response:a,json:s}}("POST","api/v1/unlock",r,{cookie:!0});i&&i.longLink?window.location.href=i.longLink:i&&i.error?alert(i.error):alert("Не получилось проверить пароль :( \nПожалуйста, попробуйте позже"),t.removeAttribute("disabled"),n.classList.remove("loader"),e.reset()}var r}))})();