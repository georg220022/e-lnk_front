(()=>{"use strict";const e=document.getElementById("password-check-form"),t=e.querySelector("input"),n=document.getElementById("password-check-button");function r(e){if(""===e.value)return!0;let t=null,n=null;return"linkPassword"===e.name&&(t=e.value.length<16,n="Пароль не может быть длинее 16 символов"),t?(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0):(e.nextElementSibling.innerText=n,e.classList.add("error-input"),!1)}e.setAttribute("novalidate",!0),t.addEventListener("blur",(()=>r(t))),t.addEventListener("input",(()=>r(t))),e.addEventListener("submit",(async function(){if(event.preventDefault(),r(t)&&(""===(o=t).value?(o.nextElementSibling.innerText="Поле не должно быть пустым",o.classList.add("error-input"),0):(o.nextElementSibling.innerText="",o.classList.remove("error-input"),1))){let r={};r.password=t.value,r.shortCode=window.location.search.replace("?","");let o=JSON.stringify(r);t.setAttribute("disabled","disabled"),n.classList.add("loader");let{response:s,json:i}=await async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{token:!1,cookie:!1},{token:o,cookie:s}=r;const i={method:e,credentials:"omit",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:n};o&&(i.headers.Authorization="Bearer ".concat(o)),s&&(i.credentials="include");let a=null,l=null;try{a=await fetch(t,i);try{l=await a.json(),console.log("Полученный json (".concat(t,"):")),console.log(l)}catch(e){}}catch(e){console.error("ошибка при запросе (".concat(t,"): ").concat(e))}return{response:a,json:l}}("POST","api/v1/unlock",o);if(302===s.status)return;i&&i.error?alert(i.error):alert("Не получилось проверить пароль :( \nПожалуйста, попробуйте позже"),t.removeAttribute("disabled"),n.classList.remove("loader"),e.reset()}var o}))})();