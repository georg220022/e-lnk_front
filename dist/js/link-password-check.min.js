(()=>{"use strict";const e=document.getElementById("password-check-form"),t=e.querySelector("input"),n=document.getElementById("password-check-button");function r(e){if(""===e.value)return!0;let t=null,n=null;return"linkPassword"===e.name&&(t=e.value.length<=16,n="Пароль не может быть длиннее 16 символов"),t?(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0):(e.nextElementSibling.innerText=n,e.classList.add("error-input"),!1)}e.setAttribute("novalidate","true"),t.addEventListener("blur",(()=>r(t))),t.addEventListener("input",(()=>r(t))),e.addEventListener("submit",(async function(o){if(o.preventDefault(),r(t)&&(""===(i=t).value?(i.nextElementSibling.innerText="Поле не должно быть пустым",i.classList.add("error-input"),0):(i.nextElementSibling.innerText="",i.classList.remove("error-input"),1))){let r={password:t.value,shortCode:window.location.search.replace("?","")},o=JSON.stringify(r);t.setAttribute("disabled","disabled"),n.classList.add("loader");let{json:i}=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{token:!1,cookie:!1},{token:o,cookie:i}=r;const l={method:e,credentials:"omit",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}};"GET"!==e&&(l.body=n),o&&(l.headers.Authorization=`Bearer ${o}`),i&&(l.credentials="include");let s=null,a=null;try{s=await fetch(t,l);try{a=await s.json(),console.log(`Полученный json (${t}, ${e}):`),console.log(a)}catch(e){}}catch(e){console.error(`ошибка при запросе (${t}): ${e}`)}return{response:s,json:a}}("POST","api/v1/unlock",o,{cookie:!0});i&&i.longLink?window.location.replace(i.longLink):i&&i.error?alert(i.error):alert("Не получилось проверить пароль :( \nПожалуйста, попробуйте позже"),t.removeAttribute("disabled"),n.classList.remove("loader"),e.reset()}var i}))})();