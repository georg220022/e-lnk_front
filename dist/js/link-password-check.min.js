(()=>{"use strict";const e=document.getElementById("password-check-form"),t=e.querySelector("input"),n=document.getElementById("password-check-button");function r(e){if(""===e.value)return!0;let t=null,n=null;return"linkPassword"===e.name&&(t=e.value.length<=16,n="Пароль не может быть длиннее 16 символов"),t?(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0):(e.nextElementSibling.innerText=n,e.classList.add("error-input"),!1)}e.setAttribute("novalidate","true"),t.addEventListener("blur",(()=>r(t))),t.addEventListener("input",(()=>r(t))),e.addEventListener("submit",(async function(i){if(i.preventDefault(),r(t)&&(""===(o=t).value?(o.nextElementSibling.innerText="Поле не должно быть пустым",o.classList.add("error-input"),0):(o.nextElementSibling.innerText="",o.classList.remove("error-input"),1))){let r={password:t.value,shortCode:window.location.search.replace("?","")},i=JSON.stringify(r);t.setAttribute("disabled","disabled"),n.classList.add("loader");let{json:o}=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{token:!1,cookie:!1},{token:i,cookie:o}=r;const l={method:e,credentials:"omit",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}};"GET"!==e&&(l.body=n),i&&(l.headers.Authorization=`Bearer ${i}`),o&&(l.credentials="include");let a=null,s=null;try{a=await fetch(t,l);try{s=await a.json()}catch(e){}}catch(e){}return{response:a,json:s}}("POST","api/v1/unlock",i,{cookie:!0});o&&o.longLink?window.location.replace(o.longLink):o&&o.error?alert(o.error):alert("Не получилось проверить пароль :( \nПожалуйста, попробуйте позже"),t.removeAttribute("disabled"),n.classList.remove("loader"),e.reset()}var o}))})();