(()=>{"use strict";var __webpack_modules__={985:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Io:()=>validateEmptyInput,wG:()=>sendRequest});class PageSection{constructor(e){this.id=document.getElementById(e)}renderComponent(e){this.id.innerHTML=e}}function validateEmptyInput(e){return""===e.value?(e.nextElementSibling.innerText="Поле не должно быть пустым",e.classList.add("error-input"),!1):(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0)}function validateAuthFilledInput(e){let t,n;switch(e.name){case"email":let r=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(e.value),a=e.value.length>30;t=r&&!a,a&&(n="E-mail не может быть длинее 30 символов"),r||(n="Введите корректный E-mail");break;case"password":let o=/^(?=.*?[a-z])(?=.*?[0-9]).{8,}$/.test(e.value),c=e.value.length>20;t=o&&!c,c&&(n="Пароль не может быть длинее 20 символов"),o||(n="Необходимо минимум 8 символов, 1 латинская буква и 1 цифра");break;case"repeat-password":t=e.value===e.closest(".form").querySelector('input[name="password"]').value,n="Пароли не совпадают";break;case"consent-checkbox":t=e.checked,n="Необходимо согласиться с условиями"}return t||""==e.value?(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0):(e.nextElementSibling.innerText=n,e.classList.add("error-input"),!1)}async function copyTextToClipboard(e){try{await navigator.clipboard.writeText(e),console.log("copied to clipboard")}catch(e){console.error(e)}}function createObjectFromInputs(inputs){let condition=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],object={};for(let input of inputs)eval(condition)&&(object[input.name]=input.value);return object}async function sendRequest(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:t};n&&(a.headers.Authorization="Bearer ".concat(n)),r&&(a.credentials="include");try{var o=await fetch(e,a);try{var c=await o.json();console.log("Полученный json (".concat(e,"):")),console.log(c)}catch(e){}}catch(t){console.error("ошибка при запросе (".concat(e,"): ").concat(t))}return{response:o,json:c}}function ruDateToISODate(e){let t=e.replace(/(\.|\:| )/g,""),n=t.substring(4,8),r=t.substring(2,4),a=t.substring(0,2),o=t.substring(8,10),c=t.substring(10,12);return"".concat(n,"-").concat(r,"-").concat(a,"T").concat(o,":").concat(c)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var e=__webpack_require__(985);const t=document.getElementById("password-check-form"),n=t.querySelector("input"),r=document.getElementById("password-check-button");function a(e){if(""===e.value)return!0;let t=null,n=null;return"linkPassword"===e.name&&(t=e.value.length<16,n="Пароль не может быть длинее 16 символов"),t?(e.nextElementSibling.innerText="",e.classList.remove("error-input"),!0):(e.nextElementSibling.innerText=n,e.classList.add("error-input"),!1)}t.setAttribute("novalidate",!0),n.addEventListener("blur",(()=>a(n))),n.addEventListener("input",(()=>a(n))),t.addEventListener("submit",(async function(){if(event.preventDefault(),a(n)&&(0,e.Io)(n)){let a={};a.password=n.value,a.shortCode=window.location.search.replace("?","");let o=JSON.stringify(a);n.setAttribute("disabled","disabled"),r.classList.add("loader");let{response:c,json:i}=await(0,e.wG)("api/v1/unlock",o);if(302===c.status)return;i&&i.error?alert(i.error):alert("Не получилось проверить пароль :( \nПожалуйста, попробуйте позже"),n.removeAttribute("disabled"),r.classList.remove("loader"),t.reset()}}))})()})();